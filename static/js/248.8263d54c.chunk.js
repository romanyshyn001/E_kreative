"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[248],{5235:function(e,n,t){t.d(n,{Z:function(){return a}});t(2791);var r="Pagination_pagination__eyq6I",s="Pagination_selectedPage__Tehc2",i=t(3329),a=function(e){for(var n=Math.ceil(e.totalPostCount/e.perPage),t=[],a=1;a<=n;a++)t.push(a);return(0,i.jsx)("nav",{className:r,children:t.map((function(n){return(0,i.jsx)("span",{className:e.currentPage===n?s:null,onClick:function(){return e.onChange(n)},children:n},n)}))})}},3248:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r=t(2791),s=t(9434),i=t(5235),a=t(3690),o=(0,t(6916).P1)((function(e){return e.announcements}),(function(e){return e})),c=t(885),u=(t(7632),"AddArticle_postTitle__xfekB"),l="AddArticle_textInput__WuUIp",d="AddArticle_btn__mrBY5",h="AddArticle_handlesPostStatus__kXXiW",m="AddArticle_userError__7vWS-",x=t(3329),j=function(e){var n=(0,s.I0)(),t=(0,r.useState)(""),i=(0,c.Z)(t,2),o=i[0],j=i[1],f=(0,r.useState)(""),v=(0,c.Z)(f,2),p=v[0],_=v[1],g=(0,r.useState)(""),S=(0,c.Z)(g,2),A=S[0],C=S[1],N=(0,r.useState)(!1),Z=(0,c.Z)(N,2),b=Z[0],P=Z[1];return(0,r.useEffect)((function(){return"addRejected"===e.errorStatus&&j("*Something went wrong... Try again later"),function(){setTimeout((function(){n((0,a.io)()),j("")}),1e4),P(!1)}}),[n,j,e.errorStatus]),(0,x.jsxs)("section",{children:[(0,x.jsx)("h2",{children:"Announcement"}),(0,x.jsxs)("form",{children:[(0,x.jsx)("label",{htmlFor:"postTitle",children:"Title:"}),(0,x.jsx)("input",{className:u,type:"text",id:"postTitle",name:"postTitle",onChange:function(e){_(e.target.value)},value:p,alt:"Input Title"}),(0,x.jsx)("label",{htmlFor:"postContent",children:"Content:"}),(0,x.jsx)("textarea",{className:l,id:"postContent",name:"postContent",onChange:function(e){C(e.target.value)},value:A})]}),(0,x.jsxs)("div",{className:h,children:[b&&(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:m,children:"*You are not autorized"})}),(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:m,children:o})}),(0,x.jsx)("button",{className:d,type:"button",onClick:function(){var t=(new Date).toISOString();if(e.user){if(p&&A){var r={title:p,body:A,userId:e.user.id,createdAt:t};n((0,a.Cn)(r)),_(""),C("")}}else P(!0)},children:"Add post"})]})]})},f={container:"AnnouncementsMain_container__mqi1I",info:"AnnouncementsMain_info__LoNz8",action:"AnnouncementsMain_action__gvBo8",messageError:"AnnouncementsMain_messageError__F41C2"},v="DeleteAnnouncements_btn__okq7h",p="DeleteAnnouncements_messageError__vYmNj",_="DeleteAnnouncements_removePost__1Vfcg",g=function(e){var n=e.errorStatus,t=e.announcement,i=(0,r.useState)(""),o=(0,c.Z)(i,2),u=o[0],l=o[1],d=(0,s.I0)();return(0,r.useEffect)((function(){"removeRejected"===n&&(l("*Can not remove announcement."),setTimeout((function(){d((0,a.io)()),l("")}),2e3))}),[d,n]),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{children:(0,x.jsx)("button",{className:v,type:"submit",onClick:function(){return e=t,void d((0,a.vx)(e));var e},children:"Remove"})}),(0,x.jsx)("div",{className:_,children:(0,x.jsx)("span",{className:p,children:u})})]})},S=t(6157),A=t(6126),C=t(3027),N="UpdateAnnouncements_btn__LqBIi",Z="UpdateAnnouncements_notifyPostStatus__fxYRq",b=function(e){var n=e.errorStatus,t=(0,r.useState)(!1),i=(0,c.Z)(t,2),o=i[0],u=i[1],l=function(){return u(!1)},d=(0,s.I0)(),h=(0,r.useState)(e.announcement.title),m=(0,c.Z)(h,2),j=m[0],f=m[1],v=(0,r.useState)(e.announcement.body),p=(0,c.Z)(v,2),_=p[0],g=p[1],b=(0,r.useState)(),P=(0,c.Z)(b,2),y=P[0],I=P[1];return(0,r.useEffect)((function(){return"editSuccess"===n?(I("Saving..."),setTimeout((function(){I(""),l()}),500)):"editRejected"===n&&(I("Announcement not saved. Try again later..."),setTimeout((function(){I("")}),5e3)),function(){d((0,a.io)())}}),[d,n]),(0,x.jsxs)("section",{children:[(0,x.jsx)(S.Z,{bsPrefix:N,onClick:function(){return u(!0)},children:"Edit"}),(0,x.jsxs)(A.Z,{show:o,onHide:l,children:[(0,x.jsx)(A.Z.Header,{closeButton:!0,children:(0,x.jsx)(A.Z.Title,{children:"Announcement Post"})}),(0,x.jsx)(A.Z.Body,{children:(0,x.jsxs)(C.Z,{children:[(0,x.jsx)(C.Z.Label,{children:"Announcement title"}),(0,x.jsx)(C.Z.Control,{as:"textarea",rows:1,placeholder:"Add your text",value:j,onChange:function(e){f(e.target.value)}}),(0,x.jsx)(C.Z.Label,{children:"Post body"}),(0,x.jsx)(C.Z.Control,{as:"textarea",rows:4,placeholder:"Add your text",value:_,onChange:function(e){g(e.target.value)}})]})}),(0,x.jsxs)(A.Z.Footer,{children:[(0,x.jsx)(S.Z,{variant:"secondary",onClick:l,children:"Close"}),(0,x.jsx)(S.Z,{variant:"primary",onClick:function(){var n=(new Date).toISOString();if(j&&_){var t={id:e.announcement.id,title:j,body:_,updatedAt:n,userId:e.user.id};d((0,a.h5)(t))}},children:"Save Changes"}),(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:Z,children:y})})]})]})]})},P=function(){var e=(0,s.I0)(),n=(0,s.v9)((function(e){return o(e)})),t=n.announcements,c=n.pageNumber,u=n.totalOnPage,l=n.totalAnnouncementCount,d=(n.isLoading,n.errorStatus),h=n.getAnnouncementError,m=JSON.parse(window.localStorage.getItem("user"));(0,r.useEffect)((function(){"addSuccess"===d&&e((0,a.p9)({pageNumber:c,totalOnPage:u})),e((0,a.p9)({pageNumber:c,totalOnPage:u}))}),[e,c,u,d]);return(0,x.jsx)("div",{className:f.container,children:(0,x.jsx)("div",{children:h?(0,x.jsx)("span",{className:f.messageError,children:"*Something went wrong"}):(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{children:(0,x.jsx)(i.Z,{totalPostCount:l,perPage:u,currentPage:c,onChange:function(n){e((0,a.p9)({pageNumber:n,totalOnPage:u}))}})}),(0,x.jsx)("div",{children:(0,x.jsx)(j,{user:m,errorStatus:d})}),t.map((function(e){return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:f.info,children:[(0,x.jsx)("span",{children:e.title}),(0,x.jsx)("div",{children:(0,x.jsx)("p",{children:e.body})})]}),(0,x.jsx)("div",{children:null!=m?(0,x.jsx)("div",{children:m.id===e.userId&&(0,x.jsxs)("div",{className:f.action,children:[(0,x.jsx)("div",{children:(0,x.jsx)(b,{user:m,announcement:e,errorStatus:d})}),(0,x.jsx)("div",{children:(0,x.jsx)(g,{announcement:e.id,errorStatus:d})})]})}):(0,x.jsx)("h3",{className:f.hidden,children:"Login for more opportunities"})})]},e.id)}))]})})})}}}]);
//# sourceMappingURL=248.8263d54c.chunk.js.map