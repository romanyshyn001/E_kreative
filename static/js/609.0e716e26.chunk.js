"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[609],{5235:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var r="Pagination_pagination__eyq6I",s="Pagination_selectedPage__Tehc2",o=n(3329),a=function(e){for(var t=Math.ceil(e.totalPostCount/e.perPage),n=[],a=1;a<=t;a++)n.push(a);return(0,o.jsx)("nav",{className:r,children:n.map((function(t){return(0,o.jsx)("span",{className:e.currentPage===t?s:null,onClick:function(){return e.onChange(t)},children:t},t)}))})}},2609:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(2791),s=n(9434),o="PostsMain_container__vTrQQ",a="PostsMain_info__Z7wq2",i="PostsMain_action__6-IiA",c="PostsMain_hidden__48MWt",d="PostsMain_mainSection__YI6oF",u="PostsMain_messageError__Cfb9l",l="PostsMain_addComment__xn4yM",m=n(3313),h=n(885),x="AddNewPost_postTitle__Mfph1",j="AddNewPost_textInput__zZ2F+",p="AddNewPost_btn__eZZi2",v="AddNewPost_handlesPostStatus__+87tu",f="AddNewPost_userError__6uMDc",_=n(3329),g=function(e){var t=e.errorStatus,n=(0,s.I0)(),o=JSON.parse(window.localStorage.getItem("user")),a=(0,r.useState)(""),i=(0,h.Z)(a,2),c=i[0],d=i[1],u=(0,r.useState)(""),l=(0,h.Z)(u,2),g=l[0],S=l[1],P=(0,r.useState)(""),C=(0,h.Z)(P,2),Z=C[0],y=C[1],N=(0,r.useState)(!1),b=(0,h.Z)(N,2),w=b[0],I=b[1];return(0,r.useEffect)((function(){return"addRejected"===t&&d("*Something went wrong... Try again later"),function(){setTimeout((function(){n((0,m.io)()),d("")}),1e4),I(!1)}}),[n,d,t]),(0,_.jsxs)("section",{children:[(0,_.jsx)("h2",{children:"What's on your mind?"}),(0,_.jsxs)("form",{children:[(0,_.jsx)("label",{htmlFor:"postTitle",children:"Post Title:"}),(0,_.jsx)("input",{className:x,type:"text",id:"postTitle",name:"postTitle",onChange:function(e){S(e.target.value)},value:g}),(0,_.jsx)("label",{htmlFor:"postContent",children:"Content:"}),(0,_.jsx)("textarea",{className:j,id:"postContent",name:"postContent",onChange:function(e){y(e.target.value)},value:Z})]}),(0,_.jsxs)("div",{className:v,children:[w&&(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:f,children:"*You are not autorized"})}),(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:f,children:c})}),(0,_.jsx)("button",{className:p,type:"button",onClick:function(){var e=(new Date).toISOString();if(o){if(g&&Z){var t={title:g,body:Z,userId:o.id,createdAt:e};n((0,m.H0)(t)),S(""),y("")}}else I(!0)},children:"Add post"})]})]})},S="DeleteItem_btn__eVBzT",P="DeleteItem_messageError__FzcXA",C="DeleteItem_removePost__l84xy",Z=function(e){var t=e.currentPage,n=e.perPage,o=e.errorStatus,a=(0,r.useState)(""),i=(0,h.Z)(a,2),c=i[0],d=i[1],u=(0,s.I0)();return(0,r.useEffect)((function(){"removeRejected"===o&&(d("*Can not remove post."),setTimeout((function(){u((0,m.io)()),d("")}),2e3))}),[u,o]),(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{children:(0,_.jsx)("button",{className:S,type:"submit",onClick:function(){return r=e.post,u((0,m.GT)(r)),void u((0,m.kh)({currentPage:t,perPage:n}));var r},children:"Remove"})}),(0,_.jsx)("div",{className:C,children:(0,_.jsx)("span",{className:P,children:c})})]})},y=n(5368),N="AddNewComment_btn__2TftE",b=(n(7632),n(6157)),w=n(6126),I=n(3027),k=n(6916),T=(0,k.P1)((function(e){return e.comment}),(function(e){return e})),E=function(e){var t=(0,s.I0)(),n=(0,r.useState)(""),o=(0,h.Z)(n,2),a=o[0],i=o[1],c=(0,r.useState)(""),d=(0,h.Z)(c,2),u=d[0],l=d[1],m=(0,r.useState)(!1),x=(0,h.Z)(m,2),j=x[0],p=x[1],v=function(){return p(!1)},f=(0,s.v9)((function(e){return T(e)})).errorStatus;return(0,r.useEffect)((function(){return"addRejected"===f?(l("*Can not add comment"),setTimeout((function(){l("")}),4e3)):"addSuccess"===f&&v(),function(){t((0,y.io)())}}),[t,f]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.Z,{bsPrefix:N,onClick:function(){return p(!0)},children:"Reply"}),(0,_.jsxs)(w.Z,{show:j,onHide:v,children:[(0,_.jsx)(w.Z.Header,{closeButton:!0,children:(0,_.jsx)(w.Z.Title,{children:"Comment"})}),(0,_.jsx)(w.Z.Body,{children:(0,_.jsx)(I.Z,{children:(0,_.jsx)(I.Z.Control,{as:"textarea",rows:3,placeholder:"Add your text",onChange:function(e){i(e.target.value)}})})}),(0,_.jsxs)(w.Z.Footer,{children:[(0,_.jsx)(b.Z,{variant:"secondary",onClick:v,children:"Close"}),(0,_.jsx)(b.Z,{variant:"primary",onClick:function(){var n=(new Date).toISOString(),r={body:a,userId:e.user.id,postId:e.post.id,createdAt:n,user:e.user};t((0,y.tk)(r)),i("")},disabled:""===a,children:"Save Changes"}),(0,_.jsx)("div",{children:(0,_.jsx)("span",{children:u})})]})]})]})},M="CommentsMain_comment__lE+oy",A="CommentsMain_userAvatar__lxpUt",R="CommentsMain_ava__z0kpW",B="CommentsMain_action__uNJ3z",U=n(2067),D="RemoveComment_btn__mN-Er",F="RemoveComment_messageError__BGZpb",H=function(e){var t=(0,s.I0)(),n=(0,r.useState)(),o=(0,h.Z)(n,2),a=o[0],i=o[1];(0,r.useEffect)((function(){"removeRejected"===e.errorStatus&&(i("**Can not remove comment"),setTimeout((function(){i(""),t((0,y.io)())}),4e3))}),[t,e.errorStatus]);return(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{className:F,children:a}),(0,_.jsx)("button",{className:D,type:"submit",onClick:function(){return n=e.comment,void t((0,y.R7)(n));var n},children:"Remove"})]})},O={btn:"UpdateReply_btn__XT3S+",replyBtn:"UpdateReply_replyBtn__m4Mdn",commentUpdate:"UpdateReply_commentUpdate__DvBvH",container:"UpdateReply_container__dUAaT"},z=function(e){var t=(0,s.I0)(),n=(0,r.useState)(!1),o=(0,h.Z)(n,2),a=o[0],i=o[1],c=function(){return i(!1)},d=e.comment,u=e.user,l=(0,r.useState)(d.body),m=(0,h.Z)(l,2),x=m[0],j=m[1],p=(0,r.useState)(),v=(0,h.Z)(p,2),f=v[0],g=v[1];return(0,r.useEffect)((function(){return"editRejected"===e.errorStatus?(g("Can not update post"),setTimeout((function(){g("")}),5e3)):"editSuccess"===e.errorStatus&&c(),function(){t((0,y.io)())}}),[t,e.errorStatus]),(0,_.jsxs)("section",{className:O.secContainer,children:[(0,_.jsx)(b.Z,{bsPrefix:O.btn,onClick:function(){return i(!0)},children:"Edit"}),(0,_.jsxs)(w.Z,{show:a,onHide:c,children:[(0,_.jsx)(w.Z.Header,{closeButton:!0,children:(0,_.jsx)(w.Z.Title,{children:"Edit Comment"})}),(0,_.jsx)(w.Z.Body,{children:(0,_.jsx)(I.Z,{children:(0,_.jsx)(I.Z.Control,{as:"textarea",rows:2,placeholder:"Add your text",value:x,onChange:function(e){j(e.target.value)}})})}),(0,_.jsxs)(w.Z.Footer,{children:[(0,_.jsx)(b.Z,{variant:"secondary",onClick:c,children:"Close"}),(0,_.jsx)(b.Z,{variant:"primary",onClick:function(){var e=(new Date).toISOString();if(x){var n={id:d.id,userId:u.id,body:x,updatedAt:e,postId:d.postId};t((0,y.EG)(n))}},children:"Save Changes"}),(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:O.notifyPostStatus,children:f})})]})]})]})},J=function(e){return(0,_.jsx)("div",{children:null!=e.user&&(0,_.jsx)("div",{children:e.user.id===e.comment.userId&&(0,_.jsxs)("div",{className:B,children:[(0,_.jsx)(H,{comment:e.comment.id,errorStatus:e.errorStatus}),(0,_.jsx)(z,{user:e.user,comment:e.comment,errorStatus:e.errorStatus})]})})})},L=function(e){var t=JSON.parse(window.localStorage.getItem("user")),n=(0,s.v9)((function(e){return T(e)})),r=n.comments,o=n.errorStatus;return(0,_.jsx)("div",{children:r.map((function(n){return(0,_.jsx)("div",{children:n.postId===e.post.id&&(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:M,children:[(0,_.jsx)("div",{children:(0,_.jsx)("div",{children:(0,_.jsx)("span",{children:n.body})})}),(0,_.jsx)("div",{children:(0,_.jsx)(J,{user:t,comment:n,errorStatus:o})})]}),(0,_.jsx)("div",{className:R,children:(0,_.jsx)("img",{className:A,src:n.user.avatar?n.user.avatar:U,alt:"your avatar"})})]})},n.id)}))})},G="UpdatePostMain_btn__jhbsj",W="UpdatePostMain_secContainer__ufk9t",q="UpdatePostMain_notifyPostStatus__LNinD",Q=function(e){var t=e.errorStatus,n=(0,r.useState)(!1),o=(0,h.Z)(n,2),a=o[0],i=o[1],c=function(){return i(!1)},d=(0,s.I0)(),u=(0,r.useState)(e.post.title),l=(0,h.Z)(u,2),x=l[0],j=l[1],p=(0,r.useState)(e.post.body),v=(0,h.Z)(p,2),f=v[0],g=v[1],S=(0,r.useState)(),P=(0,h.Z)(S,2),C=P[0],Z=P[1];return(0,r.useEffect)((function(){return"editSuccess"===t?(Z("Saving..."),setTimeout((function(){Z(""),c()}),500)):"editRejected"===t&&(Z("Post not saved. Try again later..."),setTimeout((function(){Z("")}),5e3)),function(){d((0,m.io)())}}),[d,t]),(0,_.jsxs)("section",{className:W,children:[(0,_.jsx)(b.Z,{bsPrefix:G,onClick:function(){return i(!0)},children:"Edit"}),(0,_.jsxs)(w.Z,{show:a,onHide:c,children:[(0,_.jsx)(w.Z.Header,{closeButton:!0,children:(0,_.jsx)(w.Z.Title,{children:"Edit Post"})}),(0,_.jsx)(w.Z.Body,{children:(0,_.jsxs)(I.Z,{children:[(0,_.jsx)(I.Z.Label,{children:"Post title"}),(0,_.jsx)(I.Z.Control,{as:"textarea",rows:1,placeholder:"Add your text",value:x,onChange:function(e){j(e.target.value)}}),(0,_.jsx)(I.Z.Label,{children:"Post body"}),(0,_.jsx)(I.Z.Control,{as:"textarea",rows:4,placeholder:"Add your text",value:f,onChange:function(e){g(e.target.value)}})]})}),(0,_.jsxs)(w.Z.Footer,{children:[(0,_.jsx)(b.Z,{variant:"secondary",onClick:c,children:"Close"}),(0,_.jsx)(b.Z,{variant:"primary",onClick:function(){var t=(new Date).toISOString();if(x&&f){var n={id:e.post.id,title:x,body:f,updatedAt:t,userId:e.user.id};d((0,m.nw)(n))}},children:"Save Changes"}),(0,_.jsx)("div",{children:(0,_.jsx)("span",{className:q,children:C})})]})]})]})},X=function(e){var t=e.post,n=JSON.parse(window.localStorage.getItem("user")),r=(0,s.v9)((function(e){return{getCommentError:e.comment.getCommentError}})).getCommentError;return(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{children:r&&(0,_.jsx)("span",{className:u,children:"Can't upload comments"})}),null!=n?(0,_.jsxs)("div",{className:l,children:[(0,_.jsx)("div",{children:(0,_.jsx)(E,{user:n,post:t,perPage:e.perPage,currentPage:e.currentPage})}),n.id===t.userId&&(0,_.jsxs)("div",{className:i,children:[(0,_.jsx)("div",{children:(0,_.jsx)(Q,{user:n,post:t,errorStatus:e.errorStatus})}),(0,_.jsx)("div",{children:(0,_.jsx)(Z,{post:t.id,perPage:e.perPage,currentPage:e.currentPage,errorStatus:e.errorStatus})})]})]}):(0,_.jsx)("h3",{className:c,children:"Login for more opportunities"}),(0,_.jsx)("div",{children:(0,_.jsx)(L,{post:t},t.id)})]})},Y=(0,k.P1)((function(e){return e.posts}),(function(e){return e})),V=n(5235),K=function(){var e=(0,s.I0)(),t=(0,s.v9)((function(e){return Y(e)})),n=t.posts,i=t.totalPostCount,c=t.perPage,l=t.currentPage,h=t.getPostsError,x=t.errorStatus,j=JSON.parse(window.localStorage.getItem("user"));(0,r.useEffect)((function(){"addSuccess"===x&&e((0,m.kh)({currentPage:l,perPage:c})),e((0,m.kh)({currentPage:l,perPage:c})),e((0,y.lm)())}),[e,l,c,x]);var p=n.map((function(e){return(0,_.jsxs)("article",{children:[(0,_.jsxs)("div",{className:a,children:[(0,_.jsx)("h3",{children:e.title}),(0,_.jsx)("div",{children:(0,_.jsx)("p",{children:e.body})})]}),(0,_.jsx)(X,{post:e,perPage:c,currentPage:l,user:j,errorStatus:x})]},e.id)}));return(0,_.jsxs)("div",{className:o,children:[(0,_.jsx)(V.Z,{totalPostCount:i,perPage:c,currentPage:l,onChange:function(t){e((0,m.kh)({currentPage:t,perPage:c}))}}),(0,_.jsxs)("section",{className:d,children:[1===l&&(0,_.jsx)(g,{perPage:c,currentPage:l,errorStatus:x}),h?(0,_.jsx)("span",{className:u,children:"*Something go wrong"}):p]})]})}}}]);
//# sourceMappingURL=609.0e716e26.chunk.js.map